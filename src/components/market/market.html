@if (cryptoData(); as data) {
  <div class="market-container">
    <div class="market-header">
      <h2>{{ data.symbol | cryptoPair }} Live Price: {{ data.lastPrice || 'Loading...' }}</h2>
      @switch (binanceStream.connectionStatus()) {
        @case ('connecting') {
          <span class="status status-connecting" aria-live="polite">
            <mat-spinner diameter="20"></mat-spinner>
            Connecting...
          </span>
        }
        @case ('connected') {
          <span class="status status-connected" aria-live="polite">
            <mat-icon>check_circle</mat-icon>
            Live
          </span>
        }
        @case ('error') {
          <span class="status status-error" aria-live="assertive">
            <mat-icon>error</mat-icon>
            {{ binanceStream.errorMessage() || 'Connection error' }}
          </span>
        }
        @default {}
      }
    </div>
    <app-chart [cryptoData]="data"></app-chart>
  </div>
} @else {
  <div class="loading-spinner">
    <mat-spinner></mat-spinner>
    <span>Connecting to market data...</span>
  </div>
}